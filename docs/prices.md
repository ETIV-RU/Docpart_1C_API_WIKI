# Получение списка прайс-листов

Метод возвращает список прайс-листов для загрузки на сайт

Операция: **price_list_get**

Параметры запроса:

|**Параметр**|**Пример заполнения**|**Тип** |**Описание** |
|---|---|---|---|
|task *|price_list_get|Строка|Метод для выполнения|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка|Ключ для вызова скриптов|
|price_id|7|Число/Массив чисел|Идентификаторы прайс-листов для получения настроек только по выбранным прайсам. Если не заполнен, то будут получены данные по всем настроенным прайс-листам.|

Результат запроса представляет собой структуру с данными:

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|status|Булево|Статус выполнения метода|
|message|Строка|Всегда возвращает текст «ОК»|
|data|Структура/Массив структур|Запрашиваемые данные|

При успешном выполнении метод возвращает данные [data]:

|**Поле**|**Тип**|**Описание** |**Пример заполнения** |
|---|---|---|---|
|id| Число | Идентифкатор| 3|
|name| Строка | Прайс наличие|
|load_mode| Число | Режим загрузки|3|
|ftp_host| Строка|Адрес FTP для загузки (Для режима загрузки 2)||
|ftp_user| Строка|Пользователь FTP (Для режима загрузки 2)||
|sender_email| Строка |Адрес отправителя email (Для режима загрузки 3)|mail@mail.ru|
|delete_email_messages| Число|Удалять письма после загрузки (Для режима загрузки 3)|0|
|file_name_substring| Строка| Имя или часть имени файла-вложения email (Для режима загрузки 3)|main_price|
|strings_to_left| Число| Количество строк для пропуска| 1|
|manufacturer_col| Число| Номер колонки производитель|1|
|article_col| Число| Номер колонки артикул|2|
|name_col| Число| Номер колонки наименование|4|
|exist_col|Число| Номер колонки наличие| 5|
|price_col| Число| Номер колонки цена|7|
|time_to_exe_col|Число| Номер колонки срок поставки| 0|
|min_order_col|Число| Номер колонки минимальный заказ| 0|
|storage_col|Число| Номер колонки склад| 0|
|last_updated| Дата| Дата последнего обновления|20.04.2020 14:17:00|
|clean_before| Число| Очистка перед загрузкой| 1|

# Получение записей прайс-листа

Метод возвращает все загруженные записи выбранного прайс-листа

Операция: **price_list_items_get**

Параметры запроса:

|**Параметр**|**Пример заполнения**|**Тип** |**Описание** |
|---|---|---|---|
|task *|price_list_items_get|Строка|Метод для выполнения|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка|Ключ для вызова скриптов|
|price_id|7|Число/Массив чисел|Идентификатор прайс-листа для получения списка текущих записей|

Результат запроса представляет собой структуру с данными:

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|status|Булево|Статус выполнения метода|
|message|Строка|Всегда возвращает текст «ОК»|
|data|Структура/Массив структур|Запрашиваемые данные|

При успешном выполнении метод возвращает данные [data]:

|**Поле**|**Тип**|**Описание** |**Пример заполнения** |
|---|---|---|---|
|id| Число | Идентифкатор| 3|
|manufacturer| Строка | Производитель товара|KIA|
|article| Строка | Артикул для поиска|281132F800|
|article_show| Строка | Пользовательское представление артикула|28113-2F800|
|name| Строка|Наименование товара|ФИЛЬТР ВОЗДУШНЫЙ CERATO|
|exist|Число |Наличие - Количество для заказа|7|
|price|Число|Цена |540|
|time_to_exe| Число| Время доставки|0|
|storage| Строка| Склад поставщика| Магазин|
|min_order| Число| Минимальное количество для заказа|1|


# Очистка записей прайс-листа

Метод выполняет удаление текущих записей прайс-листа. 
Внимание: Операция очистки прайс-листа является необратимой.

Операция: **price_list_items_delete**

Параметры запроса:

|**Параметр**|**Пример заполнения**|**Тип** |**Описание** |
|---|---|---|---|
|task *|price_list_items_delete|Строка|Метод для выполнения|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка|Ключ для вызова скриптов|
|price_id|7|Число/Массив чисел|Идентификатор прайс-листа для удаления записей *|

Результат запроса представляет собой структуру с данными:

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|status|Булево|Статус выполнения метода|
|message|Строка|Всегда возвращает текст «ОК»|
|data|Пустое значение|Метод не возвращает данных|



# загрузка записей прайс-листа

Загрузка новых записей прайс-листа на сайт. При загрузке строки с незаполненными полями "Артикул" и "Производитель" не будут загружены. В поле data результата отображается количество пропущенных товаров.

Операция: **price_list_items_load**

Параметры запроса:

|**Параметр**|**Пример заполнения**|**Тип** |**Описание** |
|---|---|---|---|
|task *|price_list_items_load|Строка|Метод для выполнения|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка|Ключ для вызова скриптов|
|price_id|7|Число/Массив чисел|Идентификатор прайс-листа для загрузки новых записей|
|clear_price|0|Булево|Флаг очистки текущих записей прайс-листа перед загрузкой данных|
|data||Строка|Таблица JSON с данными прайс-листа|

Таблица data представляет собой массив структур в формате JSON с полями: 

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|manufacturer|Строка|Производитель товара|
|article|Строка|Артикул товара для поиска (Без служебных символов)|
|article_show|Строка|Артикул товара для представления|
|name|Строка|Наименование товара|
|exist|Число|Количество, наличие на складе|
|price|Число|Цена товара|
|time_to_exe|Число|Срок поставки|
|storage|Строка|Склад или код склада|
|min_order|Число|Минимальный заказ|

Результат запроса представляет собой структуру с данными:

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|status|Булево|Статус выполнения метода|
|message|Строка|Всегда возвращает текст «ОК»|
|data|Строка|Возвращает количество пропущенных записей|


