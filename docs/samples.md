# Примеры работы с API

- Пример работы с сервисом для 1С: Предприятия 8.2, 8.3
<
    АдресСайта = "АдресИтернетМагазина.рф"; 
    АдресСкрипта = "/api/ones_api/gate.php"; // Путь к API на сайте
    КлючВызоваСкриптов = "KEY_FROM_DOCPART_SETTINGS"; //Ключ вызова внешних скриптов из настроек платформы Docpart
    // Если на сайте настроена HTTP-Авторизация для доступа к API
    HTTPАвторизацияЛогин ="HTTP_USER_LOGIN";
    HTTPАвторизацияПароль = "HTTP_PASSWROD";
    
    КлючВызова = КодироватьСтроку(КлючВызоваСкриптов, СпособКодированияСтроки.КодировкаURL, "UTF-8");
    ТелоЗапроса = "tech_key="+КлючВызова+"&task=check_connection"; // Параметры вызываемого метода
    
    ЗащищенноеСоединение = Новый ЗащищенноеСоединениеOpenSSL(); // Если используется протокол https, если нет, то убираем
    ПодключениеКСерверу = Новый  HTTPСоединение(АдресСайта,,HTTPАвторизацияЛогин, HTTPАвторизацияПароль,,30, ЗащищенноеСоединение);	
    ЗаголовокHTTP = Новый Соответствие;
    ЗаголовокHTTP.Вставить("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");
    ЗапросHTTP =  Новый HTTPЗапрос(АдресСкрипта, ЗаголовокHTTP);
    ЗапросHTTP.УстановитьТелоИзСтроки(ТелоЗапроса,КодировкаТекста.UTF8, ИспользованиеByteOrderMark.Авто);
    Попытка
        РезультатЗапроса = ПодключениеКСерверу.ОтправитьДляОбработки(ЗапросHTTP);
        ОтветСервера	= РезультатЗапроса.ПолучитьТелоКакСтроку();
    Исключение
        Сообщить("Обмен с Docpart: ошибка отправки данных на сервер: "+ОписаниеОшибки());
    КонецПопытки;
    
    //Обрабатываем ответ от сервера
    Сообщить(ОтветСервера); 

>