# Получение списка складов

Возвращает информацию о настроенных в платформе Docpart складах

Операция: **storages_get**

Параметры запроса:

|**Параметр**|**Пример заполнения**|**Тип** |**Описание** |
|---|---|---|---|
|task *|storages_get|Строка|Метод для выполнения|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка|Ключ для вызова скриптов|
|storage_id|1|Число|Необязательный отбор по идентификатору склада|
|interface_type|1|Число|необязательный отбор по типу интерфейса|

Результат запроса представляет собой структуру с данными:

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|status|Булево|Статус выполнения метода|
|message|Строка|Всегда возвращает текст «ОК»|
|data|Структура|Запрашиваемые данные|

При успешном выполнении метод возвращает данные [data]:

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|id|Число|Идентификатор склада|
|name|Строка|Название склада|
|short_name|Строка|Короткое название для покупателей|
|currency|Строка|Код валюты склада|
|product_type|Строка|Тип продукта, для которого используется данный склад.|
|interface_type|Строка|Тип технического интерфейса|
|description|Строка|Описание выбранного типа|

Тип продукта склада может принимать два значения: 
1 - Склад используется для встроенного каталога товаров (тот каталог, который с категориями товаров). Само наличие и цены можно указывать через страницу "Управление наличием", доступную из панели управления. Чтобы вы смогли редактировать цены и наличие для данного склада - укажите себя в качестве кладовщика в настройках ниже. 
2 - Остальные склады

# Получение данных складов

Возвращает информацию об остатках и ценах товаров на складе. Доступен только для складов с типом интерфейса = 1 (Treelax). 

Операция: **storages_data_get**

Параметры запроса:

|**Параметр**|**Пример заполнения**|**Тип** |**Описание** |
|---|---|---|---|
|task *|storages_data_get|Строка|Метод для выполнения|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка|Ключ для вызова скриптов|
|storage_id|1|Число|Отбор по идентификатору склада|

Результат запроса представляет собой структуру с данными:

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|status|Булево|Статус выполнения метода|
|message|Строка|Всегда возвращает текст «ОК»|
|data|Структура|Запрашиваемые данные|

При успешном выполнении метод возвращает данные [data]:

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|id|Число|Идентификатор записи|
|storage_id|Число|Идентификатор склада|
|category_id|Число|Идентификатор категории|
|product_id|Число|Идентификатор товара|
|issued|Число|Выдано|
|reserved|Число|Зарезервировано|
|price|Число|Цена|
|price_crossed_out|Число|Цена зачеркнутая|
|price_purchase|Число|Цена закупочная|
|exist|Число|Остаток на складе|
|arrival_time|Дата время|Время появления на складе|

# Загрузка данных складов

Загрузка данных информации об остатках и ценах товаров на складах. Если в строке массива data не заполнены поля product_id, category_id и price, то такая строка не будет загружена.

Операция: **storages_data_load**

Параметры запроса:

|**Параметр**|**Пример заполнения**|**Тип** |**Описание** |
|---|---|---|---|
|task *|storages_data_load|Строка|Метод для выполнения|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка|Ключ для вызова скриптов|
|storage_id|1|Число|Отбор по идентификатору склада|
|data|1|Массив структур|ИНформация об остатках и ценах товаров|

Поле data содержит структуру или массив структур со следующими полями: 

|**Поле**|**Тип**|**Описание** |**Пример заполнения** |
|---|---|---|---|
|product_id|Число|Идентификатор товара|125|
|category_id|Число|Идентификатор категории|79|
|price|Число|Цена товара|1250.00|
|price_crossed_out|Число|Зачеркнутая цена товара|1500.00|
|price_purchase|Число|Цена заказа|1200.00|
|exist|Число|Количество товара в наличии|50|
|reserved|Число|Количество товара в резерве|2|
|issued|Число|Количество товара выполнено|1370|
|arrival_time|Дата время|Дата ожидаемого поступления|10.01.2021 10:32:50|

Результат запроса представляет собой структуру с данными:

|**Поле**|**Тип**|**Описание** |
|---|---|---|
|status|Булево|Статус выполнения метода|
|message|Строка|Всегда возвращает текст «ОК»|
|data|Строка|Статистика загруженных данных|

При успешном выполнении метод возвращает статистику загруженных данных [data]: Loaded 1250 rows. Skipped 17 rows



